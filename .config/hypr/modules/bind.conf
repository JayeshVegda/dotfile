##############################
# CONFIGURATION VARIABLES
##############################

$mainMod = SUPER # Sets "Windows" key as main modifier


##############################
# APPLICATION LAUNCHERS
##############################

# Terminal
bind = $mainMod, return, exec, $terminal

# Applications
bind = $mainMod, B, exec, zen-browser
bind = $mainMod SHIFT, B, exec, ghostty --class=bluetuith -e bluetuith
bind = $mainMod, N, exec, swaync-client -t -sw
bind = $mainMod SHIFT, N, exec, pkill -USR1 -f wallpaper_cycle.sh
bind = $mainMod SHIFT, T, exec, ~/.config/OCR4Linux/OCR4Linux.sh --lang eng

# Vicinae (launcher/rofi alternative)
bind = ALT, Space, exec, vicinae toggle
bind = $mainMod, e, exec, vicinae deeplink vicinae://extensions/vicinae/core/search-emojis
bind = $mainMod SHIFT, V, exec, vicinae vicinae://extensions/vicinae/clipboard/history


##############################
# SYSTEM ACTIONS
##############################

# Lock screen
bind = $mainMod SHIFT, L, exec, hyprlock

# File manager
bind = $mainMod SHIFT, E, exec, $terminal -e yazi; exit

# Special workspace (scratch)
bind = $mainMod, grave, togglespecialworkspace, quick

# Screenshots
bind = $mainMod SHIFT, S, exec, hyprshot -m region --clipboard-only
bind = , Print, exec, hyprshot -m output -o ~/Pictures/Screenshots


##############################
# BASIC WINDOW MANAGEMENT
##############################

bind = $mainMod, Q, killactive
bind = $mainMod, C, exec, hyprctl dispatch togglefloating && hyprctl dispatch centerwindow
bind = $mainMod, D, exec, ~/.config/hypr/scripts/show-desktop.sh


##############################
# WINDOW FOCUS NAVIGATION (hyprnavi)
##############################

# Move focus with vim-style keys (hyprnavi with position-based edge detection)
# At screen edges, automatically moves to adjacent workspaces
bind = $mainMod, h, exec, hyprnavi l -p
bind = $mainMod, l, exec, hyprnavi r -p
bind = $mainMod, j, exec, hyprnavi d -p
bind = $mainMod, k, exec, hyprnavi u -p

# Alternative: Standard movefocus (commented out - uses hyprnavi instead)
# bind = $mainMod, h, movefocus, l
# bind = $mainMod, l, movefocus, r
# bind = $mainMod, j, movefocus, u
# bind = $mainMod, k, movefocus, d


##############################
# WINDOW MOVEMENT (hyprnavi)
##############################

# Move windows with vim-style keys (hyprscrolling-aware)
# - h/l: Promotes window to its own column, then moves to adjacent workspace/monitor
# - k/j: Moves within column, then to adjacent workspace at edges
bind = $mainMod SHIFT, h, exec, hyprnavi l -psm
bind = $mainMod SHIFT, l, exec, hyprnavi r -psm
bind = $mainMod SHIFT, k, exec, hyprnavi u -ps
bind = $mainMod SHIFT, j, exec, hyprnavi d -ps


##############################
# WORKSPACE MANAGEMENT
##############################

# Switch workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to workspace
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Scroll through workspaces with mouse wheel
bind = $mainMod SHIFT, mouse_down, workspace, e+1
bind = $mainMod SHIFT, mouse_up, workspace, e-1


##############################
# WINDOW SWITCHING (Alt-Tab)
##############################

# Alt-Tab window switcher
bind = Alt, Tab, exec, ~/.config/hypr/scripts/alt-tab.sh
bind = Alt Shift, Tab, exec, ~/.config/hypr/scripts/alt-tab.sh --reverse

# Switch between visible windows only
bind = Alt, escape, exec, ~/.config/hypr/scripts/alt-tab.sh --visible
bind = Alt Shift, escape, exec, ~/.config/hypr/scripts/alt-tab.sh --reverse --visible

# Switch between windows on same workspace
bind = Alt, code:49, exec, ~/.config/hypr/scripts/alt-tab.sh --same
bind = Alt Shift, code:49, exec, ~/.config/hypr/scripts/alt-tab.sh --reverse --same


##############################
# HYPRSCROLLING LAYOUT MANAGEMENT
##############################

# Layout scrolling (move viewport - same workspace only)
bind = $mainMod, comma, layoutmsg, move -col   # Scroll layout left (previous column)
bind = $mainMod, period, layoutmsg, move +col  # Scroll layout right (next column)

# Fine-grained window movement between columns
bind = $mainMod SHIFT, comma, layoutmsg, movewindowto l # Move window to left column
bind = $mainMod SHIFT, period, layoutmsg, movewindowto r # Move window to right column

# Column resizing
bind = $mainMod, minus, layoutmsg, colresize -0.2     # Decrease current column width (incremental)
bind = $mainMod, equal, layoutmsg, colresize +0.2     # Increase current column width (incremental)
bind = $mainMod SHIFT, minus, layoutmsg, colresize -conf  # Cycle to previous preset width
bind = $mainMod SHIFT, equal, layoutmsg, colresize +conf # Cycle to next preset width (terminal/medium/default/fullscreen)
bind = $mainMod CTRL, equal, layoutmsg, colresize all 0.5 # Resize all columns to 50%

# Fit operations (bring columns/windows into view)
# Fit active + resize column to full width (1.0) to eliminate edge visibility
bind = $mainMod, f, exec, hyprctl dispatch layoutmsg fit active && hyprctl dispatch layoutmsg colresize 1.0
bind = $mainMod SHIFT, f, layoutmsg, fit visible  # Fit visible columns
bind = $mainMod CTRL, f, layoutmsg, fit all  # Fit all columns
bind = $mainMod ALT, f, layoutmsg, fit toend  # Fit to end
bind = $mainMod ALT SHIFT, f, layoutmsg, fit tobeg  # Fit to beginning

# Column management
bind = $mainMod, p, layoutmsg, promote       # Promote window to its own column
bind = $mainMod, t, layoutmsg, togglefit      # Toggle fit method (center vs fit)

# Move entire column to workspace
bind = $mainMod CTRL SHIFT, 1, layoutmsg, movecoltoworkspace 1
bind = $mainMod CTRL SHIFT, 2, layoutmsg, movecoltoworkspace 2
bind = $mainMod CTRL SHIFT, 3, layoutmsg, movecoltoworkspace 3
bind = $mainMod CTRL SHIFT, 4, layoutmsg, movecoltoworkspace 4
bind = $mainMod CTRL SHIFT, 5, layoutmsg, movecoltoworkspace 5
bind = $mainMod CTRL SHIFT, 6, layoutmsg, movecoltoworkspace 6
bind = $mainMod CTRL SHIFT, 7, layoutmsg, movecoltoworkspace 7
bind = $mainMod CTRL SHIFT, 8, layoutmsg, movecoltoworkspace 8
bind = $mainMod CTRL SHIFT, 9, layoutmsg, movecoltoworkspace 9
bind = $mainMod CTRL SHIFT, 0, layoutmsg, movecoltoworkspace 10


##############################
# ZOOM CONTROLS
##############################

# Zoom with keyboard (repeatable)
binde = $mainMod, Z, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
binde = $mainMod, X, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')

# Reset zoom to 1.0 (normal)
bind = $mainMod SHIFT, Z, exec, hyprctl -q keyword cursor:zoom_factor 1

# Navigate apps with mouse wheel (hyprnavi)
bind = $mainMod, mouse_down, exec, hyprnavi d -p  # Navigate down
bind = $mainMod, mouse_up, exec, hyprnavi u -p    # Navigate up


##############################
# MULTIMEDIA & HARDWARE KEYS
##############################

# Audio controls (repeatable)
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = , XF86AudioMicMute, exec, playerctl play-pause

# Brightness control (repeatable)
bindel = , XF86MonBrightnessUp, exec, brightnessctl set 5%+
bindel = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# Media playback
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPrev, exec, playerctl previousd
